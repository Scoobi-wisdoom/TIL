package groupwork;

import java.util.Scanner;
import java.util.Arrays;
import java.util.Random;

public class Lotto {

	public static void main(String args[]) {
		Scanner sc = new Scanner(System.in);
        int play = 0;
        long total = 0;
        while (true) {
            System.out.println("----------LOTTO GAME----------");
            System.out.println("▶ 수동으로 하실거면 'A'를 입력해주세요.");
            System.out.println("▶ 자동으로 하실거면 'B'를 입력해주세요.");
            System.out.println("▶ 종료하시려면 'Q'를 입력해주세요.");
            System.out.print("▶ ");
            String input = sc.nextLine();
            Random r = new Random();
            if (input.equals("Q"))
                break;
            else if (input.equals("A")) {
 
                int[] user = new int[6];
//수동입력
                boolean bool = true;
                while (bool) {
                    System.out.println("[1, 45] 구간의 숫자를 중복 없이 입력하시오.");
 
                    // 중복 없는 숫자 6개를 입력받는다.
                    // 6개의 숫자로 이루어질 배열을 선언한다.
 
                    lotto: for (int i = 0; i < 6; i++) {
                        System.out.printf("%d번 째 숫자를 입력하시오. %n", i + 1);
 
                        // 먼저 사용자로부터 String으로 입력받는다.
                        // 공란을 입력했을 경우 다시 입력을 받는다.
                        String user_input = sc.nextLine();
                        if (user_input.length() == 0) {
                            i--;
                            continue lotto;
                        }
 
                        // 입력받은 것이 숫자가 맞는지 체크한다.
                        // String을 char array로 변환하여 체크한다.
                        char[] check = user_input.toCharArray();
                        for (int j = 0; j < check.length; j++) {
                            if (check[j] < '0' || check[j] > '9') {
                                System.out.println(check[j]);
                                System.out.println("조건에 맞게 입력해주세요.");
                                i--;
                                continue lotto;
                            }
                        }
 
                        // 입력받은 String을 int로 변환한다.
                        int input_num = 0;
                        input_num = Integer.parseInt(user_input);
 
                        // 입력받은 숫자가 [1, 45] 구간에 속하는지 체크한다.
                        if (input_num < 1 || input_num > 45) {
                            System.out.println("구간에 맞는 숫자가 아닙니다.");
                            i--;
                            continue lotto;
                        }
 
                        // 입력받은 숫자 중에 중복된 것이 있는지 검사한다.
                        if (i > 0) {
                            for (int j = 0; j < i; j++) {
                                if (input_num == user[j]) {
                                    i--;
                                    continue lotto;
                                }
                            }
                        }
 
                        // 입력받은 숫자를 user에 삽입한다.
                        user[i] = input_num;
 
                        // i == 5 가 되는 6번 째 실행에서 다음을 출력한다.
                        // 사용자의 선택에 따라 다시 실행할지, 그만둘지 결정한다.
                        if (i == 5) {
                            System.out.println();
                            System.out.println(Arrays.toString(user));
 
                            while (true) {
                                System.out.println("입력하신 숫자가 맞습니까? (Y/N)");
 
                                user_input = sc.nextLine();
                                if (user_input.equalsIgnoreCase("N")) {
                                    i = 0;
                                    i--;
                                    continue lotto;
                                } else if (user_input.equalsIgnoreCase("Y")) {
                                    break;
                                } else {
                                    // Y, y, N, n 외에 다른 것을 입력했을 경우 다시 입력하라고 나온다.
                                    System.out.println("잘못 입력했습니다.");
                                }
                            }
 
                            // 구매확정할 것인지, 이전 메뉴로 돌아갈 것인지 체크한다.
                            while (true) {
                                System.out.println("구매를 확정하시려면 Y 를, 이전 메뉴로 돌아가고 싶으면 N 을 눌러주세요.");
                                user_input = sc.nextLine();
                                if (user_input.equalsIgnoreCase("N")) {
                                    bool = false;
                                    play--;
                                    break;
                                } else if (user_input.equalsIgnoreCase("Y")) {
                                    // 결과
                                    int[] com = new int[6];
                                    for (int k = 0; k < com.length; k++) {
                                        com[k] = r.nextInt(45) + 1;
                                        if (k != 0) {
                                            for (int j = 0; j < k; j++) { //
                                                if (com[k] == com[j]) {
                                                    k--;
                                                    break;
                                                }
                                            }
                                        }
                                    }
                                    int num = 0; // 당첨개수
                                    for (int k = 0; k < com.length; k++) {
                                        for (int j = 0; j < user.length; j++) {
                                            if (com[k] == user[j]) {
                                                num++;
                                                break;
                                            }
                                        }
                                    }
                                    System.out.println("당첨 번호 " + Arrays.toString(com));
                                    System.out.println("당첨 개수 : " + num + "개");
                                    long l = 0;
                                    if (num == 6) {
                                        l = (r.nextInt(6) + 10) * 100_000_000;// 10~15억 랜덤 당첨금
                                        System.out.println("1등입니다.");
                                        System.out.println("당첨금: " + l);
                                    } else if (num == 5) {
                                        l = 20_000_000;
                                        System.out.println("2등입니다.");
                                        System.out.println("당첨금: " + "2천만원");
                                    } else if (num == 4) {
                                        l = 3_000_000;
                                        System.out.println("3등입니다.");
                                        System.out.println("당첨금: " + "3백만원");
                                    } else if (num == 3) {
                                        l = 5_000;
                                        System.out.println("4등입니다.");
                                        System.out.println("당첨금: " + "5천원");
                                    } else {
                                        System.out.println("다음 기회에...");
                                    }
                                    total += l;
                                    break;
                                } else {
                                    // Y, y, N, n 외에 다른 것을 입력했을 경우 다시 입력하라고 나온다.
                                    System.out.println("잘못 입력했습니다.");
                                }
                            }
                        } // if i == 5
 
                    } // for lotto
 
                } // 전체 while 루프
 
            } else if (input.equals("B")) {
                // 자동 번호 발급
                int[] user = new int[6];
 
                while (true) {
                    System.out.println("자동번호를 발급 받으시면 (Y)를");
                    System.out.println("이전 메뉴로 돌아가시려면 (N)를 눌러주세요");
                    String input1 = sc.nextLine();
 
                    if (input1.equals("N")) {
                        play--;
                        break;
                    }
 
                    for (int i = 0; i < user.length; i++) {
                        user[i] = r.nextInt(45) + 1;
 
                        if (i != 0) {
                            for (int j = 0; j < i; j++) {
                                if (user[i] == user[j]) {
                                    i--;
                                    break;
                                }
                            }
 
                        }
 
                    }
                    System.out.println(Arrays.toString(user));
                    System.out.println("        해당 숫자로 하실겁니까?");
                    System.out.println("        (Y/N)     ");
                    String input2 = sc.nextLine();
                    if (input2.equals("Y")) {
                        // 결과
                        int[] com = new int[6];
 
                        for (int i = 0; i < com.length; i++) {
                            com[i] = r.nextInt(45) + 1;
                            if (i != 0) {
                                for (int j = 0; j < i; j++) { //
                                    if (com[i] == com[j]) {
                                        i--;
                                        break;
                                    }
                                }
                            }
                        }
                        int num = 0; // 당첨개수
                        for (int i = 0; i < com.length; i++) {
                            for (int j = 0; j < user.length; j++) {
                                if (com[i] == user[j]) {
                                    num++;
                                    break;
                                }
                            }
                        }
                        System.out.println("당첨 번호 " + Arrays.toString(com));
                        System.out.println("당첨 개수 : " + num + "개");
                        long l = 0;
                        if (num == 6) {
                            l = (r.nextInt(6) + 10) * 100_000_000;// 10~15억 랜덤 당첨금
                            System.out.println("1등입니다.");
                            System.out.println("당첨금" + l);
                        } else if (num == 5) {
                            l = 20_000_000;
                            System.out.println("2등입니다.");
                            System.out.println("당첨금" + "2천만원");
                        } else if (num == 4) {
                            l = 3_000_000;
                            System.out.println("3등입니다.");
                            System.out.println("당첨금" + "3백만원");
                        } else if (num == 3) {
                            l = 5_000;
                            System.out.println("4등입니다.");
                            System.out.println("당첨금" + "5천원");
                        } else {
                            System.out.println("다음 기회에...");
                        }
                        total += l;
 
                        break;
                    }
                }
 
            } else {
                System.out.println("※ ERROR! 잘못된 입력입니다. ※");
                play--;
                continue;
            }
            play++;
            System.out.println(play + "번 했습니다.");
            System.out.println("♬총 당첨금액: " + String.format("%,d", total) + "원");
            // .format 메소드는 큰숫자를 1000단위로 보기 쉽게 하기위해 사용했습니다.
            System.out.println();
 
            // 총 상금 금액
        }
        System.out.println("게임 종료");
        sc.close();
		
		
	}
	
}
